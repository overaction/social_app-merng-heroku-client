[{"D:\\Project\\react\\social_app_merng\\server\\client\\src\\index.js":"1","D:\\Project\\react\\social_app_merng\\server\\client\\src\\App.js":"2","D:\\Project\\react\\social_app_merng\\server\\client\\src\\ApolloProvider.js":"3","D:\\Project\\react\\social_app_merng\\server\\client\\src\\pages\\Home.js":"4","D:\\Project\\react\\social_app_merng\\server\\client\\src\\pages\\Login.js":"5","D:\\Project\\react\\social_app_merng\\server\\client\\src\\pages\\Register.js":"6","D:\\Project\\react\\social_app_merng\\server\\client\\src\\components\\MenuBar.js":"7","D:\\Project\\react\\social_app_merng\\server\\client\\src\\components\\PostCard.js":"8","D:\\Project\\react\\social_app_merng\\server\\client\\src\\utils\\hooks.js":"9","D:\\Project\\react\\social_app_merng\\server\\client\\src\\context\\auth.js":"10","D:\\Project\\react\\social_app_merng\\server\\client\\src\\utils\\AuthRoute.js":"11","D:\\Project\\react\\social_app_merng\\server\\client\\src\\components\\PostForm.js":"12","D:\\Project\\react\\social_app_merng\\server\\client\\src\\utils\\graphql.js":"13","D:\\Project\\react\\social_app_merng\\server\\client\\src\\components\\LikeButton.js":"14","D:\\Project\\react\\social_app_merng\\server\\client\\src\\pages\\SinglePost.js":"15","D:\\Project\\react\\social_app_merng\\server\\client\\src\\components\\DeleteButton.js":"16","D:\\Project\\react\\social_app_merng\\server\\client\\src\\utils\\MyPopup.js":"17","D:\\Project\\react\\social_app_merng\\server\\client\\src\\components\\Alert.js":"18","D:\\Project\\react\\social_app_merng\\server\\client\\src\\components\\DeleteAlarmBtn.js":"19"},{"size":232,"mtime":1610605853918,"results":"20","hashOfConfig":"21"},{"size":1142,"mtime":1611134014173,"results":"22","hashOfConfig":"21"},{"size":953,"mtime":1610948132975,"results":"23","hashOfConfig":"21"},{"size":1700,"mtime":1611119235040,"results":"24","hashOfConfig":"21"},{"size":2883,"mtime":1610867691831,"results":"25","hashOfConfig":"21"},{"size":3824,"mtime":1610783845121,"results":"26","hashOfConfig":"21"},{"size":2270,"mtime":1611585621514,"results":"27","hashOfConfig":"21"},{"size":1984,"mtime":1611848648970,"results":"28","hashOfConfig":"21"},{"size":461,"mtime":1611639154167,"results":"29","hashOfConfig":"21"},{"size":1561,"mtime":1610812039685,"results":"30","hashOfConfig":"21"},{"size":955,"mtime":1610863306246,"results":"31","hashOfConfig":"21"},{"size":2668,"mtime":1611214871168,"results":"32","hashOfConfig":"21"},{"size":892,"mtime":1611905651568,"results":"33","hashOfConfig":"21"},{"size":2366,"mtime":1611905461239,"results":"34","hashOfConfig":"21"},{"size":8626,"mtime":1611906448622,"results":"35","hashOfConfig":"21"},{"size":2587,"mtime":1611655587153,"results":"36","hashOfConfig":"21"},{"size":213,"mtime":1611243171601,"results":"37","hashOfConfig":"21"},{"size":4684,"mtime":1611907191929,"results":"38","hashOfConfig":"21"},{"size":1142,"mtime":1611655544247,"results":"39","hashOfConfig":"21"},{"filePath":"40","messages":"41","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},"1e0byqb",{"filePath":"43","messages":"44","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"45","usedDeprecatedRules":"42"},{"filePath":"46","messages":"47","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"48","messages":"49","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"50","usedDeprecatedRules":"42"},{"filePath":"51","messages":"52","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"53","usedDeprecatedRules":"42"},{"filePath":"54","messages":"55","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"56","usedDeprecatedRules":"42"},{"filePath":"57","messages":"58","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"59","messages":"60","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"61","usedDeprecatedRules":"42"},{"filePath":"62","messages":"63","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"64","messages":"65","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":1,"source":"66","usedDeprecatedRules":"42"},{"filePath":"67","messages":"68","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"69","messages":"70","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"71","usedDeprecatedRules":"42"},{"filePath":"72","messages":"73","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"74","messages":"75","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"76","usedDeprecatedRules":"42"},{"filePath":"77","messages":"78","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"79","messages":"80","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"81","usedDeprecatedRules":"42"},{"filePath":"82","messages":"83","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"84","messages":"85","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"86","usedDeprecatedRules":"42"},{"filePath":"87","messages":"88","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"D:\\Project\\react\\social_app_merng\\server\\client\\src\\index.js",[],["89","90"],"D:\\Project\\react\\social_app_merng\\server\\client\\src\\App.js",["91","92","93"],"import React, { createContext } from 'react';\nimport './App.css';\nimport { BrowserRouter, Route, Switch, useHistory } from \"react-router-dom\";\nimport 'semantic-ui-css/semantic.min.css';\nimport Home from './pages/Home';\nimport Login from './pages/Login';\nimport Register from './pages/Register';\nimport MenuBar from './components/MenuBar';\nimport { AuthProvider } from './context/auth';\nimport AuthRoute from './utils/AuthRoute';\nimport SinglePost from './pages/SinglePost';\n\nfunction App() {\n    return (\n        // AuthProvider로 감싸줌으로써 Home, Login, Register 모두 context에 접근할 수 있다 \n        <AuthProvider>\n            <BrowserRouter>\n                <div className=\"ui container\">\n                    <MenuBar />\n                    <Route exact path=\"/\" component={Home} />\n                    <AuthRoute exact path=\"/login\" component={Login} />\n                    <AuthRoute exact path=\"/register\" component={Register} />\n                    <Route exact path=\"/posts/:postId\" component={SinglePost} />\n                </div>\n            </BrowserRouter>\n        </AuthProvider>\n    );\n}\n\nexport default App;\n","D:\\Project\\react\\social_app_merng\\server\\client\\src\\ApolloProvider.js",[],"D:\\Project\\react\\social_app_merng\\server\\client\\src\\pages\\Home.js",["94"],"import React, { useContext, useEffect, useState } from 'react'\r\nimport {useQuery} from '@apollo/react-hooks'\r\nimport { Grid, Transition } from 'semantic-ui-react'\r\nimport PostCard from '../components/PostCard';\r\nimport PostForm from '../components/PostForm';\r\nimport { AuthContext } from '../context/auth';\r\nimport { FETCH_POSTS_QUERY } from '../utils/graphql';\r\n\r\nconst Home = () => {\r\n    const contexts = useContext(AuthContext);\r\n    const {loading, err, data} = useQuery(FETCH_POSTS_QUERY);\r\n    const [posts, setPosts] = useState([]);\r\n    useEffect(() => {\r\n        if(data) {\r\n            setPosts(data.getPosts);\r\n        }\r\n    },[data]);\r\n    return (\r\n        <Grid columns={3}>\r\n            <Grid.Row className=\"page-title\">\r\n                <h1>Recent Posts</h1>\r\n            </Grid.Row>\r\n            <Grid.Row>\r\n                {contexts.user && (\r\n                    <Grid.Column>\r\n                        <PostForm />\r\n                    </Grid.Column>\r\n                )}\r\n                {loading ? (\r\n                    <h1>Loading post...</h1>\r\n                ) : (\r\n                    <Transition.Group>\r\n                        {posts &&\r\n                            posts.map((post) => (\r\n                                <Grid.Column\r\n                                    key={post.id}\r\n                                    style={{ marginBottom: 20 }}\r\n                                >\r\n                                    <PostCard post={post} />\r\n                                </Grid.Column>\r\n                            ))}\r\n                    </Transition.Group>\r\n                )}\r\n            </Grid.Row>\r\n        </Grid>\r\n    );\r\n}\r\n\r\n\r\n\r\nexport default Home\r\n","D:\\Project\\react\\social_app_merng\\server\\client\\src\\pages\\Login.js",["95"],"import { useMutation } from '@apollo/react-hooks';\r\nimport gql from 'graphql-tag';\r\nimport React, { useContext, useState } from 'react'\r\nimport { Button, Form } from 'semantic-ui-react'\r\nimport { AuthContext } from '../context/auth';\r\nimport { useForm } from '../utils/hooks';\r\n\r\nconst Login = (props) => {\r\n    const contexts = useContext(AuthContext);\r\n    const [errors, setErrors] = useState({});\r\n    const {onChange, onSubmit, values} = useForm(loginUserCallback, {\r\n        username: '',\r\n        password: ''\r\n    });\r\n\r\n    const [loginUser, {loading,error}] = useMutation(LOGIN_USER, {\r\n        update(cache,result) {\r\n            console.log(result);\r\n            props.history.push('/');\r\n            contexts.login(result.data.login);\r\n        },\r\n        onError(err) {\r\n            console.log(err.graphQLErrors);\r\n            console.log(err.graphQLErrors[0].extensions.exception.errors);\r\n            setErrors(err.graphQLErrors[0].extensions.exception.errors);\r\n        },\r\n        variables: values\r\n    });\r\n\r\n    // function 은 hoisting에 의해서 최상단으로 끌어올려진다\r\n    function loginUserCallback() {\r\n        loginUser();\r\n    }\r\n\r\n    return (\r\n        <div className=\"form-container\">\r\n            <Form onSubmit={onSubmit} noValidate className={loading ? \"loading\" : ''}>\r\n                <h1>로그인</h1>\r\n                <Form.Input\r\n                    label=\"Username\"\r\n                    placeholder=\"Username...\"\r\n                    name=\"username\"\r\n                    type=\"text\"\r\n                    value={values.username}\r\n                    error={errors.username ? true : false}\r\n                    onChange={onChange}\r\n                />\r\n                <Form.Input\r\n                    label=\"Password\"\r\n                    placeholder=\"Password...\"\r\n                    name=\"password\"\r\n                    type=\"text\"\r\n                    value={values.password}\r\n                    error={errors.password ? true : false}\r\n                    onChange={onChange}\r\n                />\r\n                <Button type='submit' primary>Submit</Button>\r\n            </Form>\r\n            {Object.keys(errors).length > 0 && (\r\n                <div className=\"ui error message\">\r\n                    <ul className=\"list\">\r\n                        {Object.values(errors).map((value) => (\r\n                            <li key={value}>{value}</li>\r\n                        ))}\r\n                    </ul>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nconst LOGIN_USER = gql`\r\n    mutation login(\r\n        $username: String!\r\n        $password: String!\r\n    ) {\r\n        login(\r\n            username: $username\r\n            password: $password\r\n        ) {\r\n            id\r\n            email\r\n            username\r\n            createdAt\r\n            token\r\n        }\r\n    }\r\n`\r\n\r\nexport default Login;\r\n","D:\\Project\\react\\social_app_merng\\server\\client\\src\\pages\\Register.js",["96"],"import { useMutation } from '@apollo/react-hooks';\r\nimport gql from 'graphql-tag';\r\nimport React, { useContext, useState } from 'react'\r\nimport { Button, Form } from 'semantic-ui-react'\r\nimport { AuthContext } from '../context/auth';\r\nimport { useForm } from '../utils/hooks';\r\n\r\nconst Register = (props) => {\r\n    const contexts = useContext(AuthContext);\r\n    const [errors, setErrors] = useState({});\r\n\r\n    const {onChange, onSubmit, values} = useForm(registerUser,{\r\n        username: '',\r\n        email: '',\r\n        password: '',\r\n        confirmPassword: ''\r\n    });\r\n\r\n    const [addUser, {loading,error}] = useMutation(REGISTER_USER, {\r\n        update(cache,result) {\r\n            console.log(result);\r\n            props.history.push('/');\r\n            contexts.login(result.data.login);\r\n        },\r\n        onError(err) {\r\n            console.log(err.graphQLErrors);\r\n            console.log(err.graphQLErrors[0].extensions.exception.errors);\r\n            setErrors(err.graphQLErrors[0].extensions.exception.errors);\r\n        },\r\n        variables: values\r\n    });\r\n\r\n    // function 은 hoisting에 의해서 최상단으로 끌어올려진다\r\n    function registerUser() {\r\n        addUser();\r\n    }\r\n\r\n    return (\r\n        <div className=\"form-container\">\r\n            <Form onSubmit={onSubmit} noValidate className={loading ? \"loading\" : ''}>\r\n                <h1>회원가입</h1>\r\n                <Form.Input\r\n                    label=\"Username\"\r\n                    placeholder=\"Username...\"\r\n                    name=\"username\"\r\n                    type=\"text\"\r\n                    value={values.username}\r\n                    error={errors.username ? true : false}\r\n                    onChange={onChange}\r\n                />\r\n                <Form.Input\r\n                    label=\"Email\"\r\n                    placeholder=\"Email...\"\r\n                    name=\"email\"\r\n                    type=\"text\"\r\n                    value={values.email}\r\n                    error={errors.email ? true : false}\r\n                    onChange={onChange}\r\n                />\r\n                <Form.Input\r\n                    label=\"Password\"\r\n                    placeholder=\"Password...\"\r\n                    name=\"password\"\r\n                    type=\"password\"\r\n                    value={values.password}\r\n                    error={errors.password ? true : false}\r\n                    onChange={onChange}\r\n                />   \r\n                <Form.Input\r\n                    label=\"Confirm Password\"\r\n                    placeholder=\"Confirm Password...\"\r\n                    name=\"confirmPassword\"\r\n                    type=\"password\"\r\n                    value={values.confirmPassword}\r\n                    error={errors.confirmPassword ? true : false}\r\n                    onChange={onChange}\r\n                />\r\n                <Button type='submit' primary>Submit</Button>\r\n            </Form>\r\n            {Object.keys(errors).length > 0 && (\r\n                <div className=\"ui error message\">\r\n                    <ul className=\"list\">\r\n                        {Object.values(errors).map((value) => (\r\n                            <li key={value}>{value}</li>\r\n                        ))}\r\n                    </ul>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nconst REGISTER_USER = gql`\r\n    mutation register(\r\n        $username: String!\r\n        $email: String!\r\n        $password: String!\r\n        $confirmPassword: String!\r\n    ) {\r\n        register(registerInput: {\r\n            username: $username\r\n            email: $email\r\n            password: $password\r\n            confirmPassword: $confirmPassword\r\n        }) {\r\n            id\r\n            email\r\n            username\r\n            createdAt\r\n            token\r\n        }\r\n    }\r\n`\r\n\r\nexport default Register\r\n","D:\\Project\\react\\social_app_merng\\server\\client\\src\\components\\MenuBar.js",[],"D:\\Project\\react\\social_app_merng\\server\\client\\src\\components\\PostCard.js",["97"],"import React, { useContext } from 'react'\r\nimport { Button, Card, Icon, Image, Label, Popup } from 'semantic-ui-react'\r\nimport moment from 'moment';\r\nimport { Link } from 'react-router-dom';\r\nimport { AuthContext } from '../context/auth';\r\nimport LikeButton from './LikeButton';\r\nimport DeleteButton from './DeleteButton';\r\nimport MyPopup from '../utils/MyPopup';\r\nconst PostCard = ({post : {body, createdAt, id, username, likeCount, commentCount, likes}}) => {\r\n    const contexts = useContext(AuthContext);\r\n\r\n    return (\r\n        <Card fluid>\r\n            <Card.Content>\r\n                <Image\r\n                    floated=\"right\"\r\n                    size=\"mini\"\r\n                    src=\"https://react.semantic-ui.com/images/avatar/large/jenny.jpg\"\r\n                />\r\n                <Card.Header>{username}</Card.Header>\r\n                <Card.Meta as={Link} to={`/posts/${id}`}>\r\n                    {moment(createdAt).fromNow(true)}\r\n                </Card.Meta>\r\n                <Card.Description>{body}</Card.Description>\r\n            </Card.Content>\r\n            <Card.Content extra>\r\n                <LikeButton post={{ username, id, likes, likeCount }} />\r\n                <MyPopup content=\"Comment on post\">\r\n                    <Button\r\n                        labelPosition=\"right\"\r\n                        as={Link}\r\n                        to={`/posts/${id}`}\r\n                    >\r\n                        <Button color=\"blue\" basic>\r\n                            <Icon name=\"comment\" />\r\n                        </Button>\r\n                        <Label basic color=\"blue\" pointing=\"left\">\r\n                            {commentCount}\r\n                        </Label>\r\n                    </Button>\r\n                </MyPopup>\r\n\r\n                {contexts.user && contexts.user.username === username && (\r\n                    <DeleteButton postId={id} />\r\n                )}\r\n            </Card.Content>\r\n        </Card>\r\n    );\r\n}\r\n\r\nexport default PostCard\r\n","D:\\Project\\react\\social_app_merng\\server\\client\\src\\utils\\hooks.js",[],"D:\\Project\\react\\social_app_merng\\server\\client\\src\\context\\auth.js",["98"],"import React, { createContext, useReducer } from 'react'\r\nimport jwtDecode from 'jwt-decode';\r\n\r\nconst initialState = {\r\n    user: null\r\n}\r\n\r\nif(localStorage.getItem('jwtToken')) {\r\n    const decodedToken = jwtDecode(localStorage.getItem('jwtToken'));\r\n    console.log(decodedToken)\r\n    if(decodedToken.exp * 1000 < Date.now()) {\r\n        localStorage.removeItem('jwtToken');\r\n    } else {\r\n        initialState.user = decodedToken;\r\n    }\r\n}\r\n\r\nconst AuthContext = createContext({\r\n    user: null,\r\n    login: (userdata) => {},\r\n    logout: () => {},\r\n});\r\n\r\nconst authReducer = (state, action) => {\r\n    switch(action.type) {\r\n        case 'LOGIN':\r\n            return {\r\n                ...state,\r\n                user: action.payload\r\n            }\r\n        case 'LOGOUT':\r\n            return {\r\n                ... state,\r\n                user: null,\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nfunction AuthProvider({children}) {\r\n    console.log(children)\r\n    const [state, dispatch] = useReducer(authReducer,initialState);\r\n\r\n    function login(userdata) {\r\n        localStorage.setItem('jwtToken',userdata.token)\r\n        dispatch({\r\n            type: 'LOGIN',\r\n            payload: userdata\r\n        })\r\n    }\r\n\r\n    function logout() {\r\n        localStorage.clear();\r\n        dispatch({type: 'LOGOUT'})\r\n    }\r\n\r\n    return (\r\n        <AuthContext.Provider value={{ user: state.user, login:login, logout:logout }}>\r\n            {children}\r\n        </AuthContext.Provider>\r\n    )\r\n}\r\n\r\nexport {AuthContext, AuthProvider}","D:\\Project\\react\\social_app_merng\\server\\client\\src\\utils\\AuthRoute.js",[],"D:\\Project\\react\\social_app_merng\\server\\client\\src\\components\\PostForm.js",["99"],"import { useMutation } from '@apollo/react-hooks';\r\nimport gql from 'graphql-tag';\r\nimport React, { useState } from 'react'\r\nimport {Button, Form} from 'semantic-ui-react';\r\nimport { FETCH_POSTS_QUERY } from '../utils/graphql';\r\nimport { useForm } from '../utils/hooks';\r\n\r\nconst PostForm = () => {\r\n    const {values, onChange, onSubmit} = useForm(createPostCallback, {\r\n        body: ''\r\n    });\r\n    const [errors, setErrors] = useState('');\r\n\r\n    const [createPost, {loading,error}] = useMutation(CREATE_POST_MUTATION, {\r\n        update(cache,result) {\r\n            // createPost result\r\n            const data = cache.readQuery({\r\n                query: FETCH_POSTS_QUERY\r\n            });\r\n            // readQuery, writeQuery를 통한 실시간 UI rendering\r\n            // https://stackoverflow.com/questions/58206190/apollo-usequery-hook-doesnt-get-update-from-cache-with-writequery-method-no\r\n            const newPost = result.data.createPost\r\n            cache.writeQuery({\r\n                query: FETCH_POSTS_QUERY,\r\n                data: {getPosts: [newPost, ...data.getPosts]}\r\n            })\r\n            values.body = ''\r\n        },\r\n        onError(err) {\r\n            console.log(err.graphQLErrors[0].message);\r\n            setErrors(err.graphQLErrors[0].message);\r\n        },\r\n        variables: values\r\n    });\r\n\r\n    function createPostCallback() {\r\n        createPost();\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Form onSubmit={onSubmit}>\r\n                <h2>Create a Post:</h2>\r\n                <Form.Field>\r\n                    <Form.Input\r\n                        placeholder=\"Hi world!\"\r\n                        name=\"body\"\r\n                        onChange={onChange}\r\n                        value={values.body}\r\n                        error={error ? true : false}\r\n                    />\r\n                    <Button type=\"submit\" color=\"teal\">\r\n                        Submit\r\n                    </Button>\r\n                </Form.Field>\r\n            </Form>\r\n            {error && (\r\n                <div className=\"ui error message\" style={{marginBottom: 20}}>\r\n                    <ul className=\"list\">{errors}</ul>\r\n                </div>\r\n            )}\r\n        </>\r\n    );\r\n}\r\n\r\nconst CREATE_POST_MUTATION = gql`\r\n    mutation createPost(\r\n        $body: String!\r\n    ) {\r\n        createPost(\r\n            body: $body\r\n        ) {\r\n        id\r\n        body\r\n        createdAt\r\n        username\r\n        comments {\r\n            id createdAt username body\r\n        }\r\n        likes {\r\n            id createdAt username\r\n        }\r\n        likeCount\r\n        commentCount\r\n        }\r\n    }\r\n`;\r\n\r\nexport default PostForm;\r\n","D:\\Project\\react\\social_app_merng\\server\\client\\src\\utils\\graphql.js",[],"D:\\Project\\react\\social_app_merng\\server\\client\\src\\components\\LikeButton.js",["100","101"],"import { gql, useMutation } from '@apollo/react-hooks'\r\nimport React, { useContext, useEffect, useState } from 'react'\r\nimport { Link, useHistory } from 'react-router-dom'\r\nimport { Button, Icon, Label } from 'semantic-ui-react';\r\nimport { AuthContext } from '../context/auth';\r\nimport { ALARM_MUTATION } from '../utils/graphql';\r\n\r\nconst LikeButton = ({post:{username,id,likeCount,likes}}) => {\r\n    const {user} = useContext(AuthContext);\r\n    const [liked, setLiked] = useState(false);\r\n    const history = useHistory();\r\n    useEffect(() => {\r\n        if(user && likes.find(like => like.username === user.username)) {\r\n            setLiked(true);\r\n        }\r\n        else setLiked(false);\r\n    },[user,likes]);\r\n\r\n    const [createAlarm] = useMutation(ALARM_MUTATION, {\r\n        update(cache,result) {\r\n            console.log('alarm created');\r\n            console.log(result);\r\n        },\r\n        variables: {\r\n            username,\r\n            body: '좋아요 표시를 했습니다',\r\n            postId: id\r\n        }\r\n    })\r\n\r\n    const [likePost, {loading,error}] = useMutation(LIKE_POST_MUTATION, {\r\n        update(cache, result) {\r\n            if(liked === false) createAlarm();\r\n        },\r\n        variables: {postId: id},\r\n        onError() {\r\n            history.push('/');\r\n            window.location.reload();\r\n        }\r\n    });\r\n\r\n    return (\r\n        <Button as=\"div\" labelPosition=\"right\" onClick={likePost}>\r\n            {user ? (\r\n                liked ? (\r\n                    <Button color=\"teal\">\r\n                        <Icon name=\"heart\" />\r\n                    </Button>\r\n                ) : (\r\n                    <Button color=\"teal\" basic>\r\n                        <Icon name=\"heart\" />\r\n                    </Button>\r\n                )\r\n            ) : (\r\n                <Button as={Link} to={`/login`} color=\"teal\" basic>\r\n                    <Icon name=\"heart\" />\r\n                </Button>\r\n            )}\r\n            <Label basic color=\"teal\" pointing=\"left\">\r\n                {likeCount}\r\n            </Label>\r\n        </Button>\r\n    );\r\n}\r\n\r\nconst LIKE_POST_MUTATION = gql`\r\n    mutation likePost($postId: ID!) {\r\n        likePost(postId: $postId) {\r\n            id\r\n            likes {\r\n                id createdAt username\r\n            }\r\n            likeCount\r\n        }\r\n    }\r\n`;\r\n\r\nexport default LikeButton\r\n","D:\\Project\\react\\social_app_merng\\server\\client\\src\\pages\\SinglePost.js",[],"D:\\Project\\react\\social_app_merng\\server\\client\\src\\components\\DeleteButton.js",["102"],"import { useMutation } from '@apollo/react-hooks';\r\nimport gql from 'graphql-tag';\r\nimport React, { useState } from 'react'\r\nimport { useHistory } from 'react-router-dom';\r\nimport { Button, Confirm, Icon, Popup } from 'semantic-ui-react';\r\nimport { FETCH_POSTS_QUERY } from '../utils/graphql';\r\nimport MyPopup from '../utils/MyPopup';\r\n\r\n// 만약 callback이 있다면 홈으로 이동\r\nconst DeleteButton = ({postId,commentId,callback}) => {\r\n    const history = useHistory();\r\n    const [confirmOpen, setConfirmOpen] = useState(false);\r\n    const mutation = commentId ? DELETE_COMMENT_MUTATION : DELETE_POST_MUTATION;\r\n    const [deletePostOrComment] = useMutation(mutation, {\r\n        update(cache,result) {\r\n            setConfirmOpen(false);\r\n            if(mutation === DELETE_POST_MUTATION) {\r\n                const data = cache.readQuery({\r\n                    query: FETCH_POSTS_QUERY\r\n                });\r\n                cache.writeQuery({\r\n                    query: FETCH_POSTS_QUERY,\r\n                    data: {getPosts : data.getPosts.filter(post => post.id !== postId)}\r\n                })\r\n            }\r\n            if(callback) callback();\r\n            \r\n        },\r\n        onError(err) {\r\n            console.log(err.graphQLErrors[0].message);\r\n            history.go(0);\r\n        },\r\n        // variables를 통해 매개변수 지정\r\n        variables: {\r\n            postId: postId,\r\n            commentId\r\n        }\r\n    })\r\n    return (\r\n        <>\r\n            <MyPopup\r\n                content={commentId ? \"Delete the Comment\" : \"Delete the post\"}\r\n            >\r\n                <Button\r\n                    as=\"div\"\r\n                    color=\"red\"\r\n                    floated=\"right\"\r\n                    onClick={() => setConfirmOpen(true)}\r\n                >\r\n                    <Icon name=\"trash\" style={{ margin: 0 }} />\r\n                </Button>\r\n            </MyPopup>\r\n\r\n            <Confirm\r\n                open={confirmOpen}\r\n                onCancel={() => setConfirmOpen(false)}\r\n                onConfirm={deletePostOrComment}\r\n            />\r\n        </>\r\n    );\r\n}\r\n\r\nconst DELETE_POST_MUTATION = gql`\r\n    mutation deletePost($postId: ID!) {\r\n        deletePost(postId: $postId)\r\n    }\r\n`\r\n\r\nconst DELETE_COMMENT_MUTATION = gql`\r\n    mutation deleteComment($postId: ID!, $commentId: ID!) {\r\n        deleteComment(postId: $postId, commentId: $commentId) {\r\n            id\r\n            comments {\r\n                id username createdAt body\r\n            }\r\n            commentCount\r\n        }\r\n    }\r\n`\r\n\r\nexport default DeleteButton\r\n","D:\\Project\\react\\social_app_merng\\server\\client\\src\\utils\\MyPopup.js",[],"D:\\Project\\react\\social_app_merng\\server\\client\\src\\components\\Alert.js",["103","104","105"],"import { useMutation, useQuery } from '@apollo/react-hooks';\r\nimport gql from 'graphql-tag';\r\nimport moment from 'moment'\r\nimport React, { useContext, useEffect, useState } from 'react'\r\nimport { Link } from 'react-router-dom';\r\nimport { Button, Card, Feed, Icon } from 'semantic-ui-react';\r\nimport { AuthContext } from '../context/auth';\r\nimport DeleteAlarmBtn from './DeleteAlarmBtn';\r\n\r\nconst Alert = () => {\r\n    const [visible, setVisible] = useState(false);\r\n    const [alarms, setAlarms] = useState({});\r\n    const {user} = useContext(AuthContext);\r\n    const {loading,err,data} = useQuery(FETCH_USER_QUERY, {\r\n        variables: {\r\n            username: user.username\r\n        }\r\n    });\r\n    const [deleteAllAlarms] = useMutation(DELETE_ALL_ALARMS, {\r\n        update(cache,result) {\r\n            setAlarms([]);\r\n        }\r\n    })\r\n    useEffect(() => {\r\n        if(data) {\r\n            setAlarms(data.getUser.alarms.slice(0).reverse());\r\n            console.log(data);\r\n            console.log(alarms)\r\n        }\r\n    },[data]);\r\n\r\n    return (\r\n        <>\r\n            <Button\r\n                as=\"div\"\r\n                basic\r\n                floated=\"right\"\r\n                onClick={() => setVisible(prev => !prev)}\r\n                className=\"alarmBtn\"\r\n                \r\n            >\r\n                    <Icon.Group>\r\n                        <Icon\r\n                            name=\"alarm\"\r\n                            color=\"blue\"\r\n                            size=\"large\"\r\n                            style={{ margin: 0, marginTop: 4 }}\r\n                            \r\n                        />\r\n                        {alarms.length > 0 && <Icon corner name=\"circle\" color=\"red\" size=\"small\">{alarms.length}</Icon>}\r\n                    </Icon.Group>\r\n            </Button>\r\n            {visible && (\r\n                <Card className=\"alarm-Container\">\r\n                    {/*알람 전체삭제*/}\r\n                    <Card.Content style={{display:'flex', justifyContent:'space-between'}}>\r\n                        <Card.Header>Recent Activity</Card.Header>\r\n                        {alarms.length > 0 && (\r\n                            <Button className=\"clearAllBtn\"\r\n                            floated=\"right\"\r\n                            color=\"blue\" size=\"medium\" onClick={deleteAllAlarms}>\r\n                            <Icon name=\"check\" color=\"teal\" size=\"big\" style={{marginLeft:15}}/>\r\n                        </Button>\r\n                        )}\r\n                    </Card.Content>\r\n                    <Card.Content>\r\n                        {alarms.length ? (\r\n                            alarms.map(alarm => (\r\n                                <div style={{display:\"flex\", justifyContent: \"space-between\"}}>\r\n                                    <Feed key={alarm.createdAt} style={{marginRight: 30}}>\r\n                                        <Feed.Event>\r\n                                            <Feed.Label image=\"/images/avatar/small/jenny.jpg\" />\r\n                                            <Feed.Content>\r\n                                                <Feed.Date content={moment(alarm.createdAt).fromNow()} />\r\n                                                <Feed.Summary>\r\n                                                    {/*TODO: 눌렀을 때 해당 게시글로 이동 */}\r\n                                                    <Link to={`/posts/${alarm.postId}`}>\r\n                                                    {alarm.username}님이 {alarm.body}.\r\n                                                    </Link>\r\n                                                </Feed.Summary>\r\n                                            </Feed.Content>\r\n                                        </Feed.Event>\r\n                                    </Feed>\r\n                                    <DeleteAlarmBtn alarmId={alarm.id}/>\r\n                                </div>\r\n                            ))\r\n                        ) : 'no alarm'}\r\n                    </Card.Content>\r\n                </Card>\r\n            )}\r\n        </>\r\n    );\r\n}\r\n\r\nconst FETCH_USER_QUERY = gql`\r\n    query($username: String!) {\r\n        getUser(username: $username) {\r\n            id email username\r\n            alarms {\r\n                id\r\n                username\r\n                createdAt\r\n                body\r\n                postId\r\n            }\r\n        }\r\n    }\r\n`\r\n\r\nconst DELETE_ALL_ALARMS = gql`\r\n    mutation{\r\n        deleteAllAlarms {\r\n            id email username\r\n            alarms {\r\n                id\r\n                username\r\n                createdAt\r\n                body\r\n            }\r\n        }\r\n    }\r\n`;\r\n\r\nexport default Alert\r\n","D:\\Project\\react\\social_app_merng\\server\\client\\src\\components\\DeleteAlarmBtn.js",[],{"ruleId":"106","replacedBy":"107"},{"ruleId":"108","replacedBy":"109"},{"ruleId":"110","severity":1,"message":"111","line":1,"column":17,"nodeType":"112","messageId":"113","endLine":1,"endColumn":30},{"ruleId":"110","severity":1,"message":"114","line":3,"column":32,"nodeType":"112","messageId":"113","endLine":3,"endColumn":38},{"ruleId":"110","severity":1,"message":"115","line":3,"column":40,"nodeType":"112","messageId":"113","endLine":3,"endColumn":50},{"ruleId":"110","severity":1,"message":"116","line":11,"column":21,"nodeType":"112","messageId":"113","endLine":11,"endColumn":24},{"ruleId":"110","severity":1,"message":"117","line":16,"column":32,"nodeType":"112","messageId":"113","endLine":16,"endColumn":37},{"ruleId":"110","severity":1,"message":"117","line":19,"column":30,"nodeType":"112","messageId":"113","endLine":19,"endColumn":35},{"ruleId":"110","severity":1,"message":"118","line":2,"column":44,"nodeType":"112","messageId":"113","endLine":2,"endColumn":49},{"ruleId":"119","severity":1,"message":"120","line":33,"column":20,"nodeType":"121","messageId":"122","endLine":33,"endColumn":21,"fix":"123"},{"ruleId":"110","severity":1,"message":"124","line":14,"column":25,"nodeType":"112","messageId":"113","endLine":14,"endColumn":32},{"ruleId":"110","severity":1,"message":"124","line":31,"column":23,"nodeType":"112","messageId":"113","endLine":31,"endColumn":30},{"ruleId":"110","severity":1,"message":"117","line":31,"column":31,"nodeType":"112","messageId":"113","endLine":31,"endColumn":36},{"ruleId":"110","severity":1,"message":"118","line":5,"column":33,"nodeType":"112","messageId":"113","endLine":5,"endColumn":38},{"ruleId":"110","severity":1,"message":"124","line":14,"column":12,"nodeType":"112","messageId":"113","endLine":14,"endColumn":19},{"ruleId":"110","severity":1,"message":"116","line":14,"column":20,"nodeType":"112","messageId":"113","endLine":14,"endColumn":23},{"ruleId":"125","severity":1,"message":"126","line":30,"column":7,"nodeType":"127","endLine":30,"endColumn":13,"suggestions":"128"},"no-native-reassign",["129"],"no-negated-in-lhs",["130"],"no-unused-vars","'createContext' is defined but never used.","Identifier","unusedVar","'Switch' is defined but never used.","'useHistory' is defined but never used.","'err' is assigned a value but never used.","'error' is assigned a value but never used.","'Popup' is defined but never used.","rest-spread-spacing","Unexpected whitespace after spread property operator.","ExperimentalSpreadProperty","unexpectedWhitespace",{"range":"131","text":"132"},"'loading' is assigned a value but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'alarms'. Either include it or remove the dependency array.","ArrayExpression",["133"],"no-global-assign","no-unsafe-negation",[820,821],"",{"desc":"134","fix":"135"},"Update the dependencies array to be: [alarms, data]",{"range":"136","text":"137"},[1029,1035],"[alarms, data]"]